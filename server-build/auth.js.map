{
  "version": 3,
  "sources": ["../server/auth.ts"],
  "sourcesContent": ["import type { AuthOptions } from \"next-auth\";\nimport bodyParser from \"body-parser\";\nimport cookieParser from \"cookie-parser\";\nimport NextAuth from \"next-auth\";\nimport { Router } from \"express\";\n\n// credit: https://github.com/s-kris/vite-ssr-starter\nconst authActions =\n  /^\\/api\\/auth\\/(session|signin\\/?\\w*|signout|csrf|providers|callback\\/\\w+|_log)$/;\nconst router = Router();\nexport default function NextAuthMiddleware(options: AuthOptions) {\n  return router\n    .use(bodyParser.urlencoded({ extended: false }))\n    .use(bodyParser.json())\n    .use(cookieParser())\n    .all(authActions, (req, res, next) => {\n      if (req.method !== \"POST\" && req.method !== \"GET\") {\n        return next();\n      }\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      //@ts-ignore\n      req.query.nextauth = req.path.split(\"/\").slice(3);\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      //@ts-ignore\n      NextAuth.default(req, res, options);\n    });\n}\n"],
  "mappings": "AACA,OAAO,gBAAgB;AACvB,OAAO,kBAAkB;AACzB,OAAO,cAAc;AACrB,SAAS,cAAc;AAGvB,MAAM,cACJ;AACF,MAAM,SAAS,OAAO;AACP,SAAR,mBAAoC,SAAsB;AAC/D,SAAO,OACJ,IAAI,WAAW,WAAW,EAAE,UAAU,MAAM,CAAC,CAAC,EAC9C,IAAI,WAAW,KAAK,CAAC,EACrB,IAAI,aAAa,CAAC,EAClB,IAAI,aAAa,CAAC,KAAK,KAAK,SAAS;AACpC,QAAI,IAAI,WAAW,UAAU,IAAI,WAAW,OAAO;AACjD,aAAO,KAAK;AAAA,IACd;AAGA,QAAI,MAAM,WAAW,IAAI,KAAK,MAAM,GAAG,EAAE,MAAM,CAAC;AAGhD,aAAS,QAAQ,KAAK,KAAK,OAAO;AAAA,EACpC,CAAC;AACL;",
  "names": []
}
